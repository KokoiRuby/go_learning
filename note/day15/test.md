Go 语言中自带轻量级的测试框架 testing 和自带的 `go test` 命令来实现单元测试和基准测试。

**单元测试**：软件中的**最小可测试单元**（通常是函数或方法）进行测试的过程。

- 目的：尽早及时发现并修复代码中出现的错误，确保代码变动不会引入新的错误（回归测试）。

**功能测试**：用于验证软件系统的功能是否按需求文档要求和预期工作。

**模糊测试**：通过向程序提供大量随机或半随机的数据来发现潜在的漏洞、崩溃或异常行为。比如输入边界问题。

**基准测试**：通常用于**衡量**函数或代码块的执行效率。确保在稳定的环境下避免外部干扰保证准确性。



Naming Convention

1. 测试用例文件必须以 `_test` 结尾
2. 功能测试用例方法必须 `Test` 开头
3. 模糊测试用例方法必须 `Fuzz` 开头
4. 基准测试用例方法必须 `Benchmark` 开头
5. 文件夹`_test` 结尾的测试包，会被编译成分离包



#### go test

`go test` 会编译所有 `*_test.go` 文件的包。以 `_` 和 `.` 开头的文件都会被忽略。

`go test` 前会运行 `go vet` 测试文件签名问题，如果在 `go vert` 过程中发现问题，将停止运行。

```bash
$ go test
$ go test -v
$ go test ./mypackage
```

Flags

- `-benchtime t`：指定测试时间，比如 1s 指定运行 1s
- `-count n` : 指定运行多少次用例。如果 `-cpu` 指定了 cpu 数量，运行次数将会是 `[n * cpu]`
- `-cover`：输出代码测试覆盖率
- `-json` ：以json方式输出测试报告
- `-failfast` ：一个测试用例失败后不去测试其他的测试用例
- `-run regexp`：指定运行测试的规则
- `-cpu 1,2,4`：指定 cpu 数量，会基于一个 cpu 跑一起，基于 2 个 cpu 跑一次，基于 4 个跑一次。对于benchmarks和模糊测试有意义。